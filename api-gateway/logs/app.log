2025-04-21 12:30:59 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-04-21 12:30:59 INFO  t.n.a.ApiGatewayApplication - Starting ApiGatewayApplication using Java 23.0.1 with PID 23772 (C:\Projetos\trAI-bot\api-gateway\target\classes started by Darlan in C:\Projetos\trAI-bot\api-gateway)
2025-04-21 12:30:59 INFO  t.n.a.ApiGatewayApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-21 12:30:59 INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-21 12:30:59 INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-21 12:31:00 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=59e2d974-a565-38d5-80d4-a10f329abc11
2025-04-21 12:31:00 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-04-21 12:31:00 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-04-21 12:31:00 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-21 12:31:00 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-04-21 12:31:01 INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2025-04-21 12:31:01 INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2025-04-21 12:31:01 INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2025-04-21 12:31:01 INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2025-04-21 12:31:01 INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2025-04-21 12:31:01 INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2025-04-21 12:31:01 INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2025-04-21 12:31:01 INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2025-04-21 12:31:01 INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2025-04-21 12:31:01 INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2025-04-21 12:31:01 INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2025-04-21 12:31:01 INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-04-21 12:31:01 INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2025-04-21 12:31:01 INFO  o.s.c.g.r.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-04-21 12:31:01 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-04-21 12:31:01 INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-04-21 12:31:01 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-04-21 12:31:01 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http)
2025-04-21 12:31:02 DEBUG o.s.c.g.filter.GatewayMetricsFilter - New routes count: 0
2025-04-21 12:31:02 INFO  t.n.a.ApiGatewayApplication - Started ApiGatewayApplication in 3.105 seconds (process running for 3.838)
2025-04-21 12:31:16 DEBUG o.s.c.g.h.RoutePredicateHandlerMapping - Route matched: auth-api
2025-04-21 12:31:16 DEBUG o.s.c.g.h.RoutePredicateHandlerMapping - Mapping [Exchange: POST http://localhost:8080/api/auth/login] to Route{id='auth-api', uri=http://localhost:8081, order=0, predicate=Paths: [/api/auth/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-04-21 12:31:16 DEBUG o.s.c.g.h.RoutePredicateHandlerMapping - [7bf2197d] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@1efd2f94
2025-04-21 12:31:16 DEBUG o.s.c.g.handler.FilteringWebHandler - Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@148fa08e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@243c3608}, order = -2147482648], [GatewayFilterAdapter{delegate=tech.noetzold.api_gateway.filter.JwtAuthFilter@42fe3246}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@1abee586}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@41b0f33c}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@9410311}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@27d0cc5b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@585043ce}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2852b054}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@66fdbd3a}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@2ccfb1f6}, order = 2147483647]]
2025-04-21 12:31:16 DEBUG o.s.c.g.f.h.o.ObservedRequestHttpHeadersFilter - Will instrument the HTTP request headers [content-type:"application/json", user-agent:"PostmanRuntime/7.43.3", accept:"*/*", cache-control:"no-cache", postman-token:"02827465-7bec-48fe-b146-9c7ae0efeafd", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"60", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:63537"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-04-21 12:31:16 DEBUG o.s.c.g.f.h.o.ObservedRequestHttpHeadersFilter - Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-api', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=6.945E-4, duration(nanos)=694500.0, startTimeNanos=152864973957400}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4dc67779'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0248016, duration(nanos)=2.48016E7, startTimeNanos=152864949959600}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7ced79a5'], parentObservation=null}} created for the request. New headers are [content-type:"application/json", user-agent:"PostmanRuntime/7.43.3", accept:"*/*", cache-control:"no-cache", postman-token:"02827465-7bec-48fe-b146-9c7ae0efeafd", host:"localhost:8080", accept-encoding:"gzip, deflate, br", content-length:"60", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:63537"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-04-21 12:31:16 DEBUG r.n.http.client.HttpClientConnect - [4fc88b2b-1, L:/127.0.0.1:63538 - R:localhost/127.0.0.1:8081] Handler is being applied: {uri=http://localhost:8081/api/auth/login, method=POST}
2025-04-21 12:31:16 DEBUG r.n.http.client.HttpClientOperations - [4fc88b2b-1, L:/127.0.0.1:63538 - R:localhost/127.0.0.1:8081] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
HTTP/1.1 200 
Vary: <filtered>
Vary: <filtered>
Vary: <filtered>
X-Content-Type-Options: <filtered>
X-XSS-Protection: <filtered>
Cache-Control: <filtered>
Pragma: <filtered>
Expires: <filtered>
X-Frame-Options: <filtered>
Content-Type: <filtered>
Transfer-Encoding: <filtered>
Date: <filtered>
2025-04-21 12:31:16 DEBUG o.s.c.g.f.h.o.ObservedResponseHttpHeadersFilter - Will instrument the response
2025-04-21 12:31:16 DEBUG o.s.c.g.f.h.o.ObservedResponseHttpHeadersFilter - The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='POST', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='auth-api', spring.cloud.gateway.route.uri='http://localhost:8081'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.5627986, duration(nanos)=5.627986E8, startTimeNanos=152864973957400}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@4dc67779'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='POST', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/auth/login'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.586864, duration(nanos)=5.86864E8, startTimeNanos=152864949959600}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@7ced79a5'], parentObservation=null}}
2025-04-21 12:31:16 DEBUG r.n.http.client.HttpClientOperations - [4fc88b2b-1, L:/127.0.0.1:63538 - R:localhost/127.0.0.1:8081] Received last HTTP packet
2025-04-21 12:31:32 DEBUG o.s.c.g.h.RoutePredicateHandlerMapping - Route matched: spot-api
2025-04-21 12:31:32 DEBUG o.s.c.g.h.RoutePredicateHandlerMapping - Mapping [Exchange: GET http://localhost:8080/api/market/candles?symbol=BTCUSDT&interval=5m&limit=50] to Route{id='spot-api', uri=http://localhost:8082, order=0, predicate=Paths: [/api/account/**, /api/market/**, /api/trade/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-04-21 12:31:32 DEBUG o.s.c.g.h.RoutePredicateHandlerMapping - [21d3cd19] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@1efd2f94
2025-04-21 12:31:32 DEBUG o.s.c.g.handler.FilteringWebHandler - Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@148fa08e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@243c3608}, order = -2147482648], [GatewayFilterAdapter{delegate=tech.noetzold.api_gateway.filter.JwtAuthFilter@42fe3246}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@1abee586}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@41b0f33c}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@9410311}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@27d0cc5b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@585043ce}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2852b054}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@66fdbd3a}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@2ccfb1f6}, order = 2147483647]]
2025-04-21 12:31:32 DEBUG o.s.c.g.f.h.o.ObservedRequestHttpHeadersFilter - Will instrument the HTTP request headers [content-type:"application/json", authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkYXJsYW5AZXhhbXBsZS5jb20iLCJ1c2VySWQiOjEsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzQ1MjQ5NDc2LCJleHAiOjE3NDUzMzU4NzZ9.GTYHrXrzoZ5wt8Ksm1Cb8xUEWnt1i3PLWKSNylnpR18", user-agent:"PostmanRuntime/7.43.3", accept:"*/*", cache-control:"no-cache", postman-token:"9baa06ad-17e3-4bcd-9987-a6a19eccad7a", host:"localhost:8080", accept-encoding:"gzip, deflate, br", X-EMAIL:"darlan@example.com", X-USER-ID:"1", X-ROLE:"user", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:63537"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-04-21 12:31:32 DEBUG o.s.c.g.f.h.o.ObservedRequestHttpHeadersFilter - Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='spot-api', spring.cloud.gateway.route.uri='http://localhost:8082'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/market/candles?symbol=BTCUSDT&interval=5m&limit=50'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=7.12E-5, duration(nanos)=71200.0, startTimeNanos=152881099948600}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@126fb6cc'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/market/candles'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0504333, duration(nanos)=5.04333E7, startTimeNanos=152881049650100}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@79ff24b'], parentObservation=null}} created for the request. New headers are [content-type:"application/json", authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkYXJsYW5AZXhhbXBsZS5jb20iLCJ1c2VySWQiOjEsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzQ1MjQ5NDc2LCJleHAiOjE3NDUzMzU4NzZ9.GTYHrXrzoZ5wt8Ksm1Cb8xUEWnt1i3PLWKSNylnpR18", user-agent:"PostmanRuntime/7.43.3", accept:"*/*", cache-control:"no-cache", postman-token:"9baa06ad-17e3-4bcd-9987-a6a19eccad7a", host:"localhost:8080", accept-encoding:"gzip, deflate, br", X-EMAIL:"darlan@example.com", X-USER-ID:"1", X-ROLE:"user", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:63537"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-04-21 12:31:32 DEBUG o.s.c.g.f.h.o.ObservationClosingWebExceptionHandler - An exception occurred and observation was not previously stopped, will stop it. The exception was [io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: getsockopt: localhost/127.0.0.1:8082]
2025-04-21 12:31:32 ERROR o.s.b.a.w.r.e.AbstractErrorWebExceptionHandler - [21d3cd19]  500 Server Error for HTTP GET "/api/market/candles?symbol=BTCUSDT&interval=5m&limit=50"
io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: getsockopt: localhost/127.0.0.1:8082
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint ⇢ org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter [DefaultWebFilterChain]
	*__checkpoint ⇢ HTTP GET "/api/market/candles?symbol=BTCUSDT&interval=5m&limit=50" [ExceptionHandlingWebHandler]
Original Stack Trace:
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:1062)
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:336)
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:339)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:784)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:732)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:658)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:998)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-04-21 12:31:57 DEBUG o.s.c.g.h.RoutePredicateHandlerMapping - Route matched: spot-api
2025-04-21 12:31:57 DEBUG o.s.c.g.h.RoutePredicateHandlerMapping - Mapping [Exchange: GET http://localhost:8080/api/market/candles?symbol=BTCUSDT&interval=5m&limit=50] to Route{id='spot-api', uri=http://localhost:8082, order=0, predicate=Paths: [/api/account/**, /api/market/**, /api/trade/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-04-21 12:31:57 DEBUG o.s.c.g.h.RoutePredicateHandlerMapping - [478b44b1] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@1efd2f94
2025-04-21 12:31:57 DEBUG o.s.c.g.handler.FilteringWebHandler - Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@148fa08e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@243c3608}, order = -2147482648], [GatewayFilterAdapter{delegate=tech.noetzold.api_gateway.filter.JwtAuthFilter@42fe3246}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@1abee586}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@41b0f33c}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@9410311}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@27d0cc5b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@585043ce}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2852b054}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@66fdbd3a}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@2ccfb1f6}, order = 2147483647]]
2025-04-21 12:31:57 DEBUG o.s.c.g.f.h.o.ObservedRequestHttpHeadersFilter - Will instrument the HTTP request headers [content-type:"application/json", authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkYXJsYW5AZXhhbXBsZS5jb20iLCJ1c2VySWQiOjEsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzQ1MjQ5NDc2LCJleHAiOjE3NDUzMzU4NzZ9.GTYHrXrzoZ5wt8Ksm1Cb8xUEWnt1i3PLWKSNylnpR18", user-agent:"PostmanRuntime/7.43.3", accept:"*/*", cache-control:"no-cache", postman-token:"204b8801-cf4a-46bc-9d16-c1f7df18e602", host:"localhost:8080", accept-encoding:"gzip, deflate, br", X-EMAIL:"darlan@example.com", X-USER-ID:"1", X-ROLE:"user", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:63590"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-04-21 12:31:57 DEBUG o.s.c.g.f.h.o.ObservedRequestHttpHeadersFilter - Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='spot-api', spring.cloud.gateway.route.uri='http://localhost:8082'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/market/candles?symbol=BTCUSDT&interval=5m&limit=50'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.377E-4, duration(nanos)=137700.0, startTimeNanos=152905913836900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6d50b604'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/market/candles'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0034561, duration(nanos)=3456100.0, startTimeNanos=152905910579700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6ed174b3'], parentObservation=null}} created for the request. New headers are [content-type:"application/json", authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkYXJsYW5AZXhhbXBsZS5jb20iLCJ1c2VySWQiOjEsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzQ1MjQ5NDc2LCJleHAiOjE3NDUzMzU4NzZ9.GTYHrXrzoZ5wt8Ksm1Cb8xUEWnt1i3PLWKSNylnpR18", user-agent:"PostmanRuntime/7.43.3", accept:"*/*", cache-control:"no-cache", postman-token:"204b8801-cf4a-46bc-9d16-c1f7df18e602", host:"localhost:8080", accept-encoding:"gzip, deflate, br", X-EMAIL:"darlan@example.com", X-USER-ID:"1", X-ROLE:"user", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:63590"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-04-21 12:31:57 DEBUG r.n.http.client.HttpClientConnect - [8233f379-1, L:/127.0.0.1:63591 - R:localhost/127.0.0.1:8082] Handler is being applied: {uri=http://localhost:8082/api/market/candles?symbol=BTCUSDT&interval=5m&limit=50, method=GET}
2025-04-21 12:31:58 DEBUG r.n.http.client.HttpClientOperations - [8233f379-1, L:/127.0.0.1:63591 - R:localhost/127.0.0.1:8082] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
HTTP/1.1 200 
Vary: <filtered>
Vary: <filtered>
Vary: <filtered>
Content-Type: <filtered>
Transfer-Encoding: <filtered>
Date: <filtered>
2025-04-21 12:31:58 DEBUG o.s.c.g.f.h.o.ObservedResponseHttpHeadersFilter - Will instrument the response
2025-04-21 12:31:58 DEBUG o.s.c.g.f.h.o.ObservedResponseHttpHeadersFilter - The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='spot-api', spring.cloud.gateway.route.uri='http://localhost:8082'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/market/candles?symbol=BTCUSDT&interval=5m&limit=50'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.9450583, duration(nanos)=9.450583E8, startTimeNanos=152905913836900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6d50b604'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/market/candles'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.9483933, duration(nanos)=9.483933E8, startTimeNanos=152905910579700}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@6ed174b3'], parentObservation=null}}
2025-04-21 12:31:58 DEBUG r.n.http.client.HttpClientOperations - [8233f379-1, L:/127.0.0.1:63591 - R:localhost/127.0.0.1:8082] Received last HTTP packet
2025-04-21 12:35:14 DEBUG o.s.c.g.h.RoutePredicateHandlerMapping - Route matched: spot-api
2025-04-21 12:35:14 DEBUG o.s.c.g.h.RoutePredicateHandlerMapping - Mapping [Exchange: GET http://localhost:8080/api/market/candles?symbol=BTCUSDT&interval=5m&limit=50] to Route{id='spot-api', uri=http://localhost:8082, order=0, predicate=Paths: [/api/account/**, /api/market/**, /api/trade/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-04-21 12:35:14 DEBUG o.s.c.g.h.RoutePredicateHandlerMapping - [6456655f] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@1efd2f94
2025-04-21 12:35:14 DEBUG o.s.c.g.handler.FilteringWebHandler - Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@148fa08e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@243c3608}, order = -2147482648], [GatewayFilterAdapter{delegate=tech.noetzold.api_gateway.filter.JwtAuthFilter@42fe3246}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@1abee586}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@41b0f33c}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@9410311}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@27d0cc5b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@585043ce}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2852b054}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@66fdbd3a}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@2ccfb1f6}, order = 2147483647]]
2025-04-21 12:35:14 DEBUG o.s.c.g.f.h.o.ObservedRequestHttpHeadersFilter - Will instrument the HTTP request headers [content-type:"application/json", authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkYXJsYW5AZXhhbXBsZS5jb20iLCJ1c2VySWQiOjEsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzQ1MjQ5NDc2LCJleHAiOjE3NDUzMzU4NzZ9.GTYHrXrzoZ5wt8Ksm1Cb8xUEWnt1i3PLWKSNylnpR18", user-agent:"PostmanRuntime/7.43.3", accept:"*/*", cache-control:"no-cache", postman-token:"842fd832-6f9a-40ee-be22-83a1a496566c", host:"localhost:8080", accept-encoding:"gzip, deflate, br", X-EMAIL:"darlan@example.com", X-USER-ID:"1", X-ROLE:"user", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:63770"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-04-21 12:35:14 DEBUG o.s.c.g.f.h.o.ObservedRequestHttpHeadersFilter - Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='spot-api', spring.cloud.gateway.route.uri='http://localhost:8082'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/market/candles?symbol=BTCUSDT&interval=5m&limit=50'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.001E-4, duration(nanos)=100100.0, startTimeNanos=153103767822900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@45c659b4'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/market/candles'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0049715, duration(nanos)=4971500.0, startTimeNanos=153103763034800}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@558aca9a'], parentObservation=null}} created for the request. New headers are [content-type:"application/json", authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkYXJsYW5AZXhhbXBsZS5jb20iLCJ1c2VySWQiOjEsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzQ1MjQ5NDc2LCJleHAiOjE3NDUzMzU4NzZ9.GTYHrXrzoZ5wt8Ksm1Cb8xUEWnt1i3PLWKSNylnpR18", user-agent:"PostmanRuntime/7.43.3", accept:"*/*", cache-control:"no-cache", postman-token:"842fd832-6f9a-40ee-be22-83a1a496566c", host:"localhost:8080", accept-encoding:"gzip, deflate, br", X-EMAIL:"darlan@example.com", X-USER-ID:"1", X-ROLE:"user", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:63770"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-04-21 12:35:14 DEBUG r.n.http.client.HttpClientConnect - [b37d3bd8-1, L:/127.0.0.1:63771 - R:localhost/127.0.0.1:8082] Handler is being applied: {uri=http://localhost:8082/api/market/candles?symbol=BTCUSDT&interval=5m&limit=50, method=GET}
2025-04-21 12:35:15 DEBUG r.n.http.client.HttpClientOperations - [b37d3bd8-1, L:/127.0.0.1:63771 - R:localhost/127.0.0.1:8082] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
HTTP/1.1 200 
Vary: <filtered>
Vary: <filtered>
Vary: <filtered>
Content-Type: <filtered>
Transfer-Encoding: <filtered>
Date: <filtered>
2025-04-21 12:35:15 DEBUG o.s.c.g.f.h.o.ObservedResponseHttpHeadersFilter - Will instrument the response
2025-04-21 12:35:15 DEBUG o.s.c.g.f.h.o.ObservedResponseHttpHeadersFilter - The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='spot-api', spring.cloud.gateway.route.uri='http://localhost:8082'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/market/candles?symbol=BTCUSDT&interval=5m&limit=50'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.3059454, duration(nanos)=3.059454E8, startTimeNanos=153103767822900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@45c659b4'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/market/candles'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.310839, duration(nanos)=3.10839E8, startTimeNanos=153103763034800}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@558aca9a'], parentObservation=null}}
2025-04-21 12:35:15 DEBUG r.n.http.client.HttpClientOperations - [b37d3bd8-1, L:/127.0.0.1:63771 - R:localhost/127.0.0.1:8082] Received last HTTP packet
2025-04-21 12:37:06 DEBUG o.s.c.g.h.RoutePredicateHandlerMapping - Route matched: spot-api
2025-04-21 12:37:06 DEBUG o.s.c.g.h.RoutePredicateHandlerMapping - Mapping [Exchange: GET http://localhost:8080/api/market/candles?symbol=BTCUSDT&interval=5m&limit=50] to Route{id='spot-api', uri=http://localhost:8082, order=0, predicate=Paths: [/api/account/**, /api/market/**, /api/trade/**], match trailing slash: true, gatewayFilters=[], metadata={}}
2025-04-21 12:37:06 DEBUG o.s.c.g.h.RoutePredicateHandlerMapping - [7051b0e2] Mapped to org.springframework.cloud.gateway.handler.FilteringWebHandler@1efd2f94
2025-04-21 12:37:06 DEBUG o.s.c.g.handler.FilteringWebHandler - Sorted gatewayFilterFactories: [[GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RemoveCachedBodyFilter@148fa08e}, order = -2147483648], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@243c3608}, order = -2147482648], [GatewayFilterAdapter{delegate=tech.noetzold.api_gateway.filter.JwtAuthFilter@42fe3246}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@1abee586}, order = -1], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardPathFilter@41b0f33c}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.GatewayMetricsFilter@9410311}, order = 0], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@27d0cc5b}, order = 10000], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.config.GatewayNoLoadBalancerClientAutoConfiguration$NoLoadBalancerClientFilter@585043ce}, order = 10150], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@2852b054}, order = 2147483646], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.NettyRoutingFilter@66fdbd3a}, order = 2147483647], [GatewayFilterAdapter{delegate=org.springframework.cloud.gateway.filter.ForwardRoutingFilter@2ccfb1f6}, order = 2147483647]]
2025-04-21 12:37:06 DEBUG o.s.c.g.f.h.o.ObservedRequestHttpHeadersFilter - Will instrument the HTTP request headers [content-type:"application/json", authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkYXJsYW5AZXhhbXBsZS5jb20iLCJ1c2VySWQiOjEsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzQ1MjQ5NDc2LCJleHAiOjE3NDUzMzU4NzZ9.GTYHrXrzoZ5wt8Ksm1Cb8xUEWnt1i3PLWKSNylnpR18", user-agent:"PostmanRuntime/7.43.3", accept:"*/*", cache-control:"no-cache", postman-token:"30d55f73-438c-4947-ab57-21dd802726c2", host:"localhost:8080", accept-encoding:"gzip, deflate, br", X-EMAIL:"darlan@example.com", X-USER-ID:"1", X-ROLE:"user", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:63879"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-04-21 12:37:06 DEBUG o.s.c.g.f.h.o.ObservedRequestHttpHeadersFilter - Client observation  {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='spot-api', spring.cloud.gateway.route.uri='http://localhost:8082'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/market/candles?symbol=BTCUSDT&interval=5m&limit=50'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=1.391E-4, duration(nanos)=139100.0, startTimeNanos=153215548884300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@65aaf93a'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/market/candles'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.0063718, duration(nanos)=6371800.0, startTimeNanos=153215542770900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@ae9ee73'], parentObservation=null}} created for the request. New headers are [content-type:"application/json", authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkYXJsYW5AZXhhbXBsZS5jb20iLCJ1c2VySWQiOjEsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzQ1MjQ5NDc2LCJleHAiOjE3NDUzMzU4NzZ9.GTYHrXrzoZ5wt8Ksm1Cb8xUEWnt1i3PLWKSNylnpR18", user-agent:"PostmanRuntime/7.43.3", accept:"*/*", cache-control:"no-cache", postman-token:"30d55f73-438c-4947-ab57-21dd802726c2", host:"localhost:8080", accept-encoding:"gzip, deflate, br", X-EMAIL:"darlan@example.com", X-USER-ID:"1", X-ROLE:"user", Forwarded:"proto=http;host="localhost:8080";for="[0:0:0:0:0:0:0:1]:63879"", X-Forwarded-For:"0:0:0:0:0:0:0:1", X-Forwarded-Proto:"http", X-Forwarded-Port:"8080", X-Forwarded-Host:"localhost:8080"]
2025-04-21 12:37:06 DEBUG r.n.http.client.HttpClientConnect - [ce46b5b7-1, L:/127.0.0.1:63880 - R:localhost/127.0.0.1:8082] Handler is being applied: {uri=http://localhost:8082/api/market/candles?symbol=BTCUSDT&interval=5m&limit=50, method=GET}
2025-04-21 12:37:07 DEBUG r.n.http.client.HttpClientOperations - [ce46b5b7-1, L:/127.0.0.1:63880 - R:localhost/127.0.0.1:8082] Received response (auto-read:false) : RESPONSE(decodeResult: success, version: HTTP/1.1)
HTTP/1.1 200 
Vary: <filtered>
Vary: <filtered>
Vary: <filtered>
Content-Type: <filtered>
Transfer-Encoding: <filtered>
Date: <filtered>
2025-04-21 12:37:07 DEBUG o.s.c.g.f.h.o.ObservedResponseHttpHeadersFilter - Will instrument the response
2025-04-21 12:37:07 DEBUG o.s.c.g.f.h.o.ObservedResponseHttpHeadersFilter - The response was handled for observation {name=http.client.requests(null), error=null, context=name='http.client.requests', contextualName='null', error='null', lowCardinalityKeyValues=[http.method='GET', http.status_code='UNKNOWN', spring.cloud.gateway.route.id='spot-api', spring.cloud.gateway.route.uri='http://localhost:8082'], highCardinalityKeyValues=[http.uri='http://localhost:8080/api/market/candles?symbol=BTCUSDT&interval=5m&limit=50'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.3119926, duration(nanos)=3.119926E8, startTimeNanos=153215548884300}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@65aaf93a'], parentObservation={name=http.server.requests(null), error=null, context=name='http.server.requests', contextualName='null', error='null', lowCardinalityKeyValues=[exception='none', method='GET', outcome='SUCCESS', status='200', uri='UNKNOWN'], highCardinalityKeyValues=[http.url='/api/market/candles'], map=[class io.micrometer.core.instrument.LongTaskTimer$Sample='SampleImpl{duration(seconds)=0.3182039, duration(nanos)=3.182039E8, startTimeNanos=153215542770900}', class io.micrometer.core.instrument.Timer$Sample='io.micrometer.core.instrument.Timer$Sample@ae9ee73'], parentObservation=null}}
2025-04-21 12:37:07 DEBUG r.n.http.client.HttpClientOperations - [ce46b5b7-1, L:/127.0.0.1:63880 - R:localhost/127.0.0.1:8082] Received last HTTP packet
2025-04-21 19:00:58 INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-04-21 19:00:58 INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
